<!DOCTYPE html>
<html>
<head>
    <title>Online Judge with Chatbot</title>

    <!-- Add Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

    <style>
        #chatbox, #codebox {
            height: 400px;
            border: 1px solid black;
            overflow-y: scroll;
            display: none; /* Initially hidden */
        }
        #problemList {
            display: none; /* Initially hidden */
        }
        #addList {
            height: 400px;
            border: 1px solid black;
            overflow-y: scroll;
            display: none; /* Initially hidden */
        }
        .container {
          margin-top: 20px;

        }
    </style>
</head>

<body class="bg-light">

<div class="container">
    <div class="text-center">
        <button onclick="showChat()" class='btn btn-primary'>Chat Room</button>
        <button onclick="showProblems()" class='btn btn-primary'>OnlineJudge</button>
    </div>

    <div id="chatbox" class='mt-3 p-3 bg-white rounded'>
        <input type="text" id="message" placeholder="Type your message here" class='form-control'>
        <button onclick="sendMessage()" class='btn btn-success mt-2'>Send</button>
    </div>
    <div id="addList" class='mt-3 p-3 bg-white rounded'>
        <input type="text" id="newProblemName" placeholder="Type your code name" class='form-control'>
        <textarea id="newProblemCode" placeholder="Type your code" class='form-control' rows="10"></textarea>
        <input type="text" id="newProblemDescription" placeholder="Type your code info" class='form-control'>
        <button onclick="add()" class='btn btn-success mt-2'>Add</button>
    </div>
    <div id="problemList" class='mt-3 p-3 bg-white rounded'>
        <h4>Problems:</h4>
        <ul id='problems' style='list-style-type:none;'>
        </ul>
        <button onclick="showList()" class='btn btn-success mt-2'>Add</button>
        <button onclick="del()" class='btn btn-success mt-2'>Delete</button>
    </div>

    <div id='codebox' style='display:none;' class='mt-3 p-3 bg-white rounded'>
    <!-- Replace 'Problem' with actual problem description -->
    <h4>Problem:</h4>
        <ul id='name' style='list-style-type:none;'>
        </ul>
    <p>Description:</p>
        <ul id='description' style='list-style-type:none;'>
        </ul>
    <div class="form-group">
        <label for="output">Output:</label>
        <textarea id="output" class="form-control" rows="5" cols="50"></textarea>
    </div>
    <div class="form-group">
        <label for="code">Code:</label>
        <textarea id="code" class="form-control" rows="10" cols="50"></textarea>
    </div>
    <button class="btn btn-success">Submit Code</button><br/>
    <p>Result:</p>
    </div>
    </div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script type="text/javascript">

    function showChat() { $('#chatbox').show(); $('#problemList').hide(); $('#codebox').hide(); $('#addList').hide(); }

    function showProblems() { $('#chatbox').hide(); $('#problemList').show(); $('#addList').hide(); }

    function showList() { $('#chatbox').hide(); $('#problemList').hide(); $('#addList').show(); }

    function add() {
        var name = document.getElementById('newProblemName').value;
        var description = document.getElementById('newProblemDescription').value;
        var code = document.getElementById('newProblemCode').value;

        if (name && description && code) {
            // TODO : Send the new problem to the server and update the problem list
            // This is just a placeholder and needs to be replaced with an actual AJAX call
            $('#problems').append('<li>' + name + '<button onclick=\'testProblem("' + name + '", "' +
                description + '", "' + code + '")\' class=\'btn btn-primary btn-sm ml-2\'>Test</button></li>');
            showProblems();
        }
    }

     function testProblem(name, description, code) {
        // Clear existing problem details first
        $('#name').empty();
        $('#description').empty();
        $('#output').empty();
        $('#code').empty();
        // Set the problem name and description
         //TODO 백엔드로 넘어가서 이름에 맞게 추가된 code를 불러와 실행시키고 output넣기
        $('#name').append('<li>' + name + '</li>');
        $('#description').append('<li>' + description + '</li>');
        $('#output').append('<li>' + correctoutput + '</li>');
        // Set the code and show the codebox
        document.getElementById('code').value = code;
        $('#codebox').show();
    }


    function del() {
        var delName = prompt("Delete problem name : ");
        if (delName) {
            // Remove the problem, name, and description elements with the specified name
            $("#problems li").filter(function () { return $.text([this]) === delName; }).remove();
            $("#name li").filter(function () { return $.text([this]) === delName; }).remove();
            $("#description li").filter(function () { return $.text([this]) === delName; }).remove();

            // Hide the codebox if there are no more problems
            if ($('#problems li').length === 0) {
                $('#codebox').hide();
            }
        }
    }
    function send() {
        // TODO: Implement code submission logic here
    }

    function sendMessage() {
        // TODO: Implement chat message sending logic here
    }

</script>
</body>
</html>